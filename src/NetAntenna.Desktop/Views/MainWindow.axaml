<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:NetAntenna.Desktop.ViewModels"
        xmlns:local="using:NetAntenna.Desktop"
        x:Class="NetAntenna.Desktop.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Net Antenna"
        Width="1280" Height="800"
        MinWidth="900" MinHeight="600"
        ExtendClientAreaToDecorationsHint="True"
        ExtendClientAreaChromeHints="NoChrome"
        ExtendClientAreaTitleBarHeightHint="-1"
        WindowStartupLocation="CenterScreen">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Window.DataTemplates>
        <local:ViewLocator/>
    </Window.DataTemplates>

    <DockPanel>
        <!-- Global Header Bar -->
        <Border DockPanel.Dock="Top" Background="#1E1E2E" Padding="16,8" PointerPressed="OnHeaderPointerPressed" BackgroundSizing="InnerBorderEdge">
            <Grid ColumnDefinitions="Auto,*,Auto,Auto,Auto,Auto">
                <!-- App Title -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                    <TextBlock Text="ðŸ“¡" FontSize="20"/>
                    <TextBlock Text="Net Antenna" FontSize="18" FontWeight="Bold" Foreground="#00BCD4"/>
                </StackPanel>

                <!-- Device Selector -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center" Margin="16,0">
                    <TextBlock Text="Device:" VerticalAlignment="Center" Foreground="#B0B0B0"/>
                    <ComboBox ItemsSource="{Binding Devices}"
                              SelectedItem="{Binding SelectedDevice}"
                              MinWidth="200" MaxWidth="300">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding FriendlyName}"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </StackPanel>

                <!-- Connection Status -->
                <StackPanel Grid.Column="3" Orientation="Horizontal" Spacing="6" VerticalAlignment="Center" Margin="16,0">
                    <Ellipse Width="10" Height="10"
                             Fill="{Binding IsConnected, Converter={x:Static local:Converters.BoolToConnectionColor}}"/>
                    <TextBlock Text="{Binding ConnectionStatus}" Foreground="#B0B0B0" FontSize="12"/>
                </StackPanel>

                <!-- Quick Scan Button -->
                <Button Grid.Column="4"
                        Content="âš¡ Quick Scan"
                        Command="{Binding QuickScanCommand}"
                        IsEnabled="{Binding !IsScanning}"
                        Padding="12,6" Margin="0,0,16,0"
                        Background="#00BCD4" Foreground="White"
                        CornerRadius="4"/>

                <!-- Custom Window Controls -->
                <StackPanel Grid.Column="5" Orientation="Horizontal" Spacing="0" VerticalAlignment="Stretch">
                    <Button Click="OnMinimizeClick" Background="Transparent" Foreground="#B0B0B0" CornerRadius="0" Padding="12,4" VerticalAlignment="Stretch" VerticalContentAlignment="Center" FontSize="16">
                        <TextBlock Text="â€”" Margin="0,8,0,0"/>
                    </Button>
                    <Button Click="OnMaximizeClick" Background="Transparent" Foreground="#B0B0B0" CornerRadius="0" Padding="12,4" VerticalAlignment="Stretch" VerticalContentAlignment="Center" FontSize="18">
                        <TextBlock Text="â–¡" Margin="0,2,0,0"/>
                    </Button>
                    <Button Click="OnCloseClick" Background="Transparent" Foreground="#F44336" CornerRadius="0" Padding="12,4" VerticalAlignment="Stretch" VerticalContentAlignment="Center" FontSize="16">
                        <TextBlock Text="âœ•" Margin="0,2,0,0"/>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Left Navigation Sidebar -->
        <Border DockPanel.Dock="Left" Background="#181825" Width="180" Padding="0,8">
            <StackPanel Spacing="2">
                <Button Content="ðŸ“Š  Dashboard"
                        Command="{Binding NavigateToCommand}"
                        CommandParameter="Dashboard"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Left"
                        Padding="16,10"
                        Background="{Binding SelectedNavItem, Converter={x:Static local:Converters.NavItemBackground}, ConverterParameter=Dashboard}"
                        CornerRadius="0"/>

                <Button Content="ðŸ“º  Channels"
                        Command="{Binding NavigateToCommand}" CommandParameter="Channels"
                        Background="{Binding SelectedNavItem, Converter={x:Static local:Converters.NavItemBackground}, ConverterParameter=Channels}"
                        HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Padding="16,10" CornerRadius="0"/>

                <Button Content="ðŸ—ºï¸  Tower Map"
                        Command="{Binding NavigateToCommand}" CommandParameter="TowerMap"
                        Background="{Binding SelectedNavItem, Converter={x:Static local:Converters.NavItemBackground}, ConverterParameter=TowerMap}"
                        HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Padding="16,10" CornerRadius="0"/>

                <Button Content="ðŸ“»  Spectrum Sweep"
                        Command="{Binding NavigateToCommand}" CommandParameter="SpectrumOverview"
                        Background="{Binding SelectedNavItem, Converter={x:Static local:Converters.NavItemBackground}, ConverterParameter=SpectrumOverview}"
                        HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Padding="16,10" CornerRadius="0"/>

                <Button Content="ðŸ§­  Aiming Assistant"
                        Command="{Binding NavigateToCommand}" CommandParameter="AimingAssistant"
                        Background="{Binding SelectedNavItem, Converter={x:Static local:Converters.NavItemBackground}, ConverterParameter=AimingAssistant}"
                        HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Padding="16,10" CornerRadius="0"/>

                <Button Content="ðŸ“  Logs"
                        Command="{Binding NavigateToCommand}" CommandParameter="Logs"
                        Background="{Binding SelectedNavItem, Converter={x:Static local:Converters.NavItemBackground}, ConverterParameter=Logs}"
                        HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Padding="16,10" CornerRadius="0"/>

                <Button Content="âš™  Settings"
                        Command="{Binding NavigateToCommand}"
                        CommandParameter="Settings"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Left"
                        Padding="16,10"
                        Background="{Binding SelectedNavItem, Converter={x:Static local:Converters.NavItemBackground}, ConverterParameter=Settings}"
                        CornerRadius="0"/>
            </StackPanel>
        </Border>

        <!-- Main Content Area -->
        <Border Background="#11111B" Padding="16">
            <ContentControl Content="{Binding CurrentPage}"/>
        </Border>
    </DockPanel>
</Window>
